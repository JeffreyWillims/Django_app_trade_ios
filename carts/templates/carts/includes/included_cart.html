{% load static %}

<div class="cart-body-content">
{% if carts %}
    <ul class="list-group list-group-flush">
        {% for cart_item in carts %}
            <li class="list-group-item">
                <div class="row d-flex align-items-center">
                    <div class="col-3 col-md-2">
                        <a href="{% url 'products:product' cart_item.product.slug %}">
                            <img src="{{ cart_item.product.image.url|default_if_none:'' }}" class="img-fluid rounded" alt="{{ cart_item.product.name }}">
                        </a>
                    </div>
                    <div class="col-5 col-md-5">
                        <a href="{% url 'products:product' cart_item.product.slug %}" class="text-dark text-decoration-none">{{ cart_item.product.name }}</a>
                    </div>
                    <div class="col-4 col-md-3">
                        <div class="input-group">
                            <button class="btn btn-outline-secondary btn-sm ajax-cart-btn" data-method="POST" data-action="decrement" data-url="{% url 'carts:cart_change_quantity' cart_id=cart_item.id %}">-</button>
                            <input type="text" class="form-control form-control-sm text-center" value="{{ cart_item.quantity }}" readonly>
                            <button class="btn btn-outline-secondary btn-sm ajax-cart-btn" data-method="POST" data-action="increment" data-url="{% url 'carts:cart_change_quantity' cart_id=cart_item.id %}">+</button>
                        </div>
                    </div>
                    <div class="col-12 col-md-2 text-end">
                        <strong class="text-nowrap">{{ cart_item.products_price }} ₽</strong>
                    </div>
                    <a href="{% url 'carts:cart_remove' cart_id=cart_item.id %}" class="position-absolute top-0 end-0 p-2 text-danger ajax-cart-btn" title="Удалить">
                        <img src="{% static 'icons/trash3-fill.svg' %}" alt="Удалить" width="16" height="16">
                    </a>
                </div>
            </li>
        {% endfor %}
    </ul>
    <div class="card-footer mt-3 bg-white border-top-0">
        <div class="d-flex justify-content-between align-items-center">
            <p class="mb-0">Итого: <strong>{{ carts.total_quantity }}</strong> товар(а) на сумму</p>
            <h4 class="mb-0"><strong>{{ carts.total_price }} ₽</strong></h4>
        </div>
    </div>
    <div class="mt-3 text-end">
        <a href="{% url 'orders:create_order' %}" class="btn btn-primary">Оформить заказ</a>
    </div>
{% else %}
    <p class="text-center text-muted py-4">Ваша корзина пуста.</p>
{% endif %}
</div>